{% extends 'posts/layout.html' %} {% load static %}
{% load humanize %}
{% block content %}

  {% if messages %} {% for message in messages %}
  <div class="my-2 alert alert-{{ message.tags }}">{{message}}</div>
  {% endfor %} {% endif %}

  <h1 class="text-center my-4">User Dashboard</h1>
  <hr>
  {% include 'accounts/status.html' %}
  <hr>
    <div class="row">
        <div class="col-md-5 my-4">
            <h5>Your Details</h5>
            <hr>
            <div class="card shadow-sm">
                <div class="card-body">
                <table class="table table-sm">
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Action</th>
                    </tr>
                    <tr>
                        <td>{{user.username}}</td>
                        <td>{{user.email}}</td>
                        <td><a class="btn btn-sm btn-warning" href="#">Update Your Profile</a></td>
                    </tr>
                </table>
                </div>

            </div>
        </div>
        <div class="col-md-7 my-4">
            <h5>Latest Posts</h5>
            <hr>
            <div class="card shadow-sm">
                <div class="card-body">
                <table class="table table-sm">
                    <tr>
                        <th colspan='2'>Title</th>
                        <th>Last Updated</th>
                        <th>Status</th>
                        <th>Update</th>
                        <th>Remove</th>
                    </tr>
                    {%for post in posts%}
                    <tr>
                        <td colspan='2'>{{post.title}}</td>
                        <td>{{post.updated|naturaltime}}</td>
                        <td style='text-transform: capitalize;'>{{post.status}}</td>
                        <td class='text-center'><a href="{% url 'posts:update-post' post.slug %}"><i class='fas fa-edit'></i></a></td>
                        <td class='text-center'><a href="{% url 'posts:delete-post' post.slug %}"><i class='fas fa-trash text-danger'></i></a></td>
                    </tr>
                    {%endfor%}
                </table>
                    {% if posts.has_other_pages %}
                        <nav aria-label="Page navigation conatiner"></nav>
                        <ul class="pagination pagination-sm justify-content-center">
                            {% if posts.has_previous %}
                            <li><a href="?page={{ posts.previous_page_number }}" class="btn btn-light">&laquo; Previous </a></li>
                            {% endif %}
                            {% if posts.has_next %}
                            <li><a href="?page={{ posts.next_page_number }}" class="btn btn-light"> Next &raquo;</a></li>
                        {% endif %}
                        </ul>
                        </nav>
                    {% endif %}
                </div>

            </div>
        </div>
    </div>
 
{% endblock %}
